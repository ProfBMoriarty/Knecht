
<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>Knecht | API</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="description" content="Knecht | API"/>
    <meta name="keywords" content="knecht, game, design, engine, gameclavier, networking, moriarty, feeney, fite, carlson, wpi"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <link rel="shortcut icon" href="http://users.wpi.edu/~bmoriarty/ps/favicon.png"/>
    <link rel="apple-touch-icon" href="http://users.wpi.edu/~bmoriarty/ps/apple-touch-icon.png"/>
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic,100' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body>
<div id="header">
    <p><img src="images/logosm.png" alt="[Logo]"><strong>Knecht<sup class="sup3">1</sup></strong></p>

    <ul id="nav">
        <li><a href="index.html">Home</a></li>
        <li><a href="download.html">Download</a></li>
        <li><a href="learning.html">Learning</a></li>
        <li><a href="examples.html">Examples</a></li>
        <li><a href="#">API</a></li>
        <li><a href="links.html">Links</a></li>
    </ul>
</div>

<div id="main">
<p class="subhead">API</p>

<p>The following is a list of all application-facing Knecht API function calls.</p>

<p>Click on a category name to view all documentation for that category.</p>

<p>Click on a function name to view its specific documentation.</p>

<div class="section">
    <p class="subhead"><a href="#utility">Utility</a></p>
    <ul class="select">
        <li><a href="#config">K.config</a> ( config )</li>
    </ul>
</div>

<div class="section">
    <p class="subhead"><a href="#users">Users</a></p>

    <p class="subitem">Account commands</p>

    <ul class="select">
        <li><a href="#getusers">K.getUsers</a> ( constraints, callback)</li>
        <li><a href="#register">K.register</a> ( username, password, callback, timeout )</li>
        <li><a href="#unregister">K.unregister</a> ( callback )</li>
        <li><a href="#login">K.login</a> ( username, password, callback, timeout )</li>
        <li><a href="#logout">K.logout</a> ( callback )</li>
        <li><a href="#recoverpassword">K.recoverPassword</a> ( username, callback )</li>
        <li><a href="#changepassword">K.changePassword</a> ( password, callback )</li>
    </ul>

    <p class="subitem">Data commands</p>

    <ul class="select">
        <li><a href="#putdata">K.putData</a> ( field, data, callback )</li>
        <li><a href="#getdata">K.getData</a> ( field, callback )</li>
        <li><a href="#deletedata">K.deleteData</a> ( field, callback )</li>
    </ul>
</div>

<div class="section">
    <p class="subhead"><a href="#groups">Groups</a></p>

    <p class="subitem">Group commands</p>

    <ul class="select">
        <li><a href="#getgroups">K.getGroups</a> ( constraints, callback )</li>
        <li><a href="#startgroup">K.startGroup</a> ( group_name, callback )</li>
        <li><a href="#closegroup">K.closeGroup</a> ( group_name, callback )</li>
    </ul>

    <p class="subitem">Member commands</p>

    <ul class="select">
        <li><a href="#addmember">K.addMember</a> ( group_name, member, callback )</li>
        <li><a href="#removemember">K.removeMember</a> ( group_name, member, callback )</li>
    </ul>

    <p class="subitem">Data commands</p>

    <ul class="select">
        <li><a href="#getgroupdata">K.getGroupData</a> ( group_name, field, callback )</li>
        <li><a href="#submitupdate">K.submitUpdate</a> ( group_name, field, data, callback, member, permission )</li>
        <li><a href="#listenupdate">K.listenUpdate</a> ( group_name, callback, limit, clear )</li>
        <li><a href="#submitinput">K.submitInput</a> ( group_name, input, callback )</li>
        <li><a href="#listeninput">K.listenInput</a> ( group_name, callback, clear )</li>
        <li><a href="#setpermission">K.setPermission</a> ( group_name, field, member, permission, callback ) </li>
    </ul>
</div>

<div class="section">
    <p class="subhead" id="utility">API | Utility</p>

    <p>These functions do not involve communication with the Knecht server, but instead are required to configure
        the client before other API commands are invoked.</p>

    <ul class="select">
        <li><a href="#config">K.config</a> ( config )</li>
    </ul>

    <div class="section">
        <p class="subhead" id="config">K.config ( config )</p>

        <p>K.config sets and returns client configuration variables</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li>(optional) <b>config</b> : <em>object</em></li>
            </ol>
        </div>

        <p>The <b>config</b> parameter is an object with the following optional properties:</p>

        <ul>
            <li><b>.address</b> : <em>string</em></li>
            <li><b>.application</b> : <em>string</em></li>
            <li><b>.error_callback</b> : <em>function</em></li>
            <li><b>.username</b> : <em>string</em></li>
            <li><b>.password</b> : <em>string</em></li>
            <li><b>.session</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.address</p>

        <p>The http address of the Knecht server the client will communicate with.  The default server is located at
            <a href="perlenspiel.cs.wpi.edu">perlenspiel.cs.wpi.edu</a>.</p>

        <p class="subitem">.application</p>

        <p>A string identifying the application currently using the Knecht engine, usually set only once per runtime.
            It is up to application designers to correctly label their programs; Knecht makes no attempt to verify
            and application's identity.</p>

        <p class="subitem">.error_callback</p>

        <p>A <em>function</em> that will be called whenever a Knecht client function receives an error response
            from the server.  It takes 2 parameters:</p>

        <ul>
            <li><b>.functionName</b> : <em>string</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p>These strings are, respectively, the name of the function that caused the error and the kind of error
            encountered</p>

        <p class="subitem">.username / .password / .session</p>

        <p>These strings should correspond to some registered user on the server.  These three variables are normally set
            by the Knecht client internally after calls to <a href="#register">K.register</a> or
            <a href="#login">K.login</a>, but may be manually set, for example, to switch between multiple accounts.</p>

        <p class="subitem">Usage</p>

        <p>K.config() must be called at least once to set the server address before other Knecht API functions are
            called, unless using the default server at <a href="perlenspiel.cs.wpi.edu">perlenspiel.cs.wpi.edu</a>,
            and for the calling application to identify itself.</p>

        <p>If the application name is not set, the user will be unable to act on any of their data or start any
            groups.</p>

        <p class="subitem">Return value</p>

        <p>K.config returns an object with the each of the above members.  Each member contains the value of the
            corresponding internal variable Knecht uses to store configuration and authentication information.</p>

        <div class="example">
            <p>// EXAMPLE:<br/>
                //writes the error to the current document<br/>
                var writeError = function( functionName, err )<br/>
                {<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>alert( "Error " + err + " in fun " + functionName );<br/>
                }<br/>
                // Set the server address, application name,<br/>
                //and error callback function<br/>
                K.config ( { <br/>
                <span>&nbsp;&nbsp;&nbsp;</span>address: "perlenspiel.cs.wpi.edu:8080",<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>application: "demo",<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>error_callback: writeError<br/>
                });</p>
        </div>

    </div>

</div>

<div class="section">
<p class="subhead" id="users">API | Users</p>

<p>These functions involve single user accounts and the data associated with them</p>

<p class="subitem">Account commands</p>

<ul class="select">
    <li><a href="#getusers">K.getUsers</a> ( constraints, callback)</li>
    <li><a href="#register">K.register</a> ( username, password, callback, timeout )</li>
    <li><a href="#unregister">K.unregister</a> ( callback )</li>
    <li><a href="#login">K.login</a> ( username, password, callback, timeout )</li>
    <li><a href="#logout">K.logout</a> ( callback )</li>
    <li><a href="#recoverpassword">K.recoverPassword</a> ( username, callback )</li>
    <li><a href="#changepassword">K.changePassword</a> ( password, callback )</li>
</ul>

<p class="subitem">Data commands</p>

<ul class="select">
    <li><a href="#putdata">K.putData</a> ( field, data, callback )</li>
    <li><a href="#getdata">K.getData</a> ( field, callback )</li>
    <li><a href="#deletedata">K.deleteData</a> ( field, callback )</li>
</ul>

<div class="section">
    <p class="subhead" id="getusers">K.getUsers ( constraints, callback )</p>

    <p>K.getUsers retrieves a list of users who fit the given constraints</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>constraints</b> : <em>object</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>constraints</b> parameter is an object with the following optional properties:</p>

    <ul>
        <li><b>.username</b> : <em>string</em></li>
        <li><b>.group_name</b> : <em>string</em></li>
        <li><b>.online</b> : <em>boolean</em></li>
    </ul>

    <p class="subitem">.username</p>

    <p>If this member is included, only the single user whose registered username exactly matches this string
        will be included.</p>

    <p class="subitem">.group_name</p>

    <p>A string giving the name of a group.  Only users who are either the host or a member of the group whose
        name matches this string will be included.</p>

    <p class="subitem">.online</p>

    <p>If this boolean is set to true, then only users whose most recent session has not yet expired, and was thus
        recently online, will be included.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.getUsers is used to retrieve lobby information and maintain friend lists, as well as checking to see
        whether a given username is registered or not when signing up for an account.</p>

    <p class="subitem">Return value</p>

    <p>K.getUsers returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.users</b> : <em>array of string</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.users</p>

    <p>An array of all usernames from the database matching the constraints.  This member is only present if the
        function completed successfully.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //flag stating whether the user is a member of the group<br/>
            var in_class;<br/>
            //Checks whether the user is a member of the group<br/>
            K.getUsers( { <br/>
            <span>&nbsp;&nbsp;&nbsp;</span>username: "Patrick",<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>group: "classof2014",<br/>
            },<br/>
            function(res)<br/>
            {<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>in_class = (!res.error && res.users[0] === "Patrick");<br/>
            });</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="register">K.register ( username, password, callback )</p>

    <p>K.register creates a new user account on the server.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>username</b> : <em>string</em></li>
            <li><b>password</b> : <em>string</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>username</b> parameter is the account name the user wishes to register.  It must be one that is not
        already registered, or an error will occur and no account will be registered.</p>

    <p>The <b>password</b> parameter is the password the account will be registered with.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.register is used to create a persistent account the user can use to interact with the Knecht database.
        Without an account, a user cannot store their data on the server or participate in groups.</p>

    <p class="subitem">Return value</p>

    <p>K.register returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.session</b> : <em>string</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.session</p>

    <p>A randomly generated session key that identifies the current login, passed to subsequent Knecht functions in
        place of the password in order to improve security.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //registers user 'Ian' with password '1234'<br/>
            K.register( 'Ian', '1234', function(res) {<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert('Account registered');<br/>
            });</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="unregister">K.unregister ( callback )</p>

    <p>K.unregister removes a user and all of their associated data from the server.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.unregister is used when a user no longer wishes to use Knecht and would like to remove themself from it's
        database.  The user must be logged in in order to unregister, or else an error will occur.</p>

    <p class="subitem">Return value</p>

    <p>K.unregister returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //logs in as a user<br/>
            K.login( 'Ian', '1234', function(res) {<br/>
            //delete user if login successful<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) K.unregister(function(res){<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert('Account deleted');<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>});<br/>
            });</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="login">K.login ( username, password, callback )</p>

    <p>K.login authenticates an existing user account and generates a session key for it.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>username</b> : <em>string</em></li>
            <li><b>password</b> : <em>string</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>username</b> parameter is the name of the account the user wishes to log in as.  It must be one that was
        registered previously, or an error will occur.</p>

    <p>The <b>password</b> parameter is the password to be used for the login.  It must match that registered for the
        account identified by The <b>username</b> parameter, or an error will occur.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.login is used to access a user's persistent account data and groups.  Logging in invalidates previous session
        keys, and therefore a user may only be logged in from one location at a time.</p>

    <p class="subitem">Return value</p>

    <p>K.login returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.session</b> : <em>string</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.session</p>

    <p>A randomly generated session key that identifies the current login, passed to subsequent Knecht functions in
        place of the password in order to improve security.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //logs in user 'Ian' with password '1234'<br/>
            K.login( 'Ian', '1234', function(res) {<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert('login successful');<br/>
            });</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="logout">K.logout ( callback )</p>

    <p>K.logout invalidates a user's session key, requiring them to log in again to continue using Knecht.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.logout is used when a user is finished using Knecht and wishes to prevent other users with access to their
        computer from using their account.  The user must be logged in in order to logout, or else an error will occur.</p>

    <p class="subitem">Return value</p>

    <p>K.logout returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //logs in as a user<br/>
            K.login( 'Ian', '1234', function(res) {<br/>
            //logout if login successful<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) K.logout(function(res){<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert('Logged out');<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>});<br/>
            });</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="recoverpassword">K.recoverPassword ( username, callback )</p>

    <p>K.recoverPassword sends an email containing a user's password to that user, if their registered name is a valid
        email address.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>username</b> : <em>string</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>username</b> parameter is the name of the account whose password the user wishes to recover.  It must be
        one that was registered previously, or an error will occur.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.recoverPassword is used when a user has forgotten their password and wishes to regain access to their Knecht
        account.  It will only work if the username is a valid email address, but will not return an error if it is not.
        The email will contain the user's current password.</p>

    <p class="subitem">Return value</p>

    <p>K.recoverPassword returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //sends an email to 'bencarlson@fakemail.net' if that is<br/>
            //both a valid email and a registered account<br/>
            K.recoverPassword( 'bencarlson@fakemail.net',<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>function(res) {<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert('email sent');<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>});</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="changepassword">K.changePassword ( password, callback )</p>

    <p>K.changePassword changes the currently logged in user's registered password.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>password</b> : <em>string</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>password</b> parameter is the new password the user wishes to use in future logins in place of
        their old password.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.changePassword is used when a user wishes to use a different password from the one they originally registered
        with, whether because it is easier to remember or if they believe that their original password has been
        compromised.  The user must be logged in to use this function, or an error will occur.</p>

    <p class="subitem">Return value</p>

    <p>K.changePassword returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //logs in as a user<br/>
            K.login( 'Ian', '1234', function(res) {<br/>
            //change password if login successful<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) K.changePassword('a7B!', function(res){<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert('password changed');<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>});<br/>
            });</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="putdata">K.putData ( field, data, callback )</p>

    <p>K.putData stores single-player data on the knecht server for later retrieval.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>field</b> : <em>string</em> or <em>array of string</em></li>
            <li><b>data</b> : <em>any</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>field</b> parameter identifies the field or fields to be updated in the database.  Fields that do not yet
        exist in the database will be created, while existing ones will be updated with the new data.  Each application
        has its own namespace for data fields to prevent collision.</p>

    <p>The <b>data</b> parameter contains the data to be stored in the named fields.  If the <b>field</b> parameter is
        a string then data is interpreted to be the contents of that one field, but if <b>field</b> is an array then
        data is interpreted as an array of data values to be stored in the corresponding fields.  If the length of the
        field and data arrays does not match, an error will occur.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.putData is used to store single-player data on the server.  Only the user with which the data is associated
        may access or interact with data stored in this way.  The user must be logged in and the client's application
        must be set to use this function, or an error will occur.</p>

    <p class="subitem">Return value</p>

    <p>K.putData returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //stores the object {x: 5, y: 4} in the fields<br/>
            //'p_spawn' and 'p_loc'<br/>
            var p_spawn = {x: 5, y: 4};<br/>
            K.login( 'Ian', '1234',<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>function(res) {<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) K.putData(<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            ['p_spawn', 'p_loc'], [p_spawn, p_spawn],<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            function(res){<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            if(!res.error) alert("data stored");<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>});<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>});</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="getdata">K.getData ( field, callback )</p>

    <p>K.putData retrieves stored single-player data from the knecht server.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>field</b> : <em>string</em> or <em>array of string</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>field</b> parameter identifies the field or fields to be retrieved.  Each application
        has its own namespace for data fields to prevent collision.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.getData is used to retrieve a user's data from the server.  Only the associated user may access this data,
        and attempting to use this function without an application set or account logged in will result in an error.</p>

    <p class="subitem">Return value</p>

    <p>K.getData returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.data</b> : <em>object</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.data</p>

    <p>A data containing members of the format 'field:value'.  If a requested field was not present in the database,
        that member will return as undefined.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //retrieves data in the field 'p_spawn'<br/>
            K.login( 'Ian', '1234',<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>function(res) {<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) K.getData(<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            ['p_spawn'], function(res){<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            if(!res.error) alert(<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            res.data.p_spawn.x + ','<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            + res.data.p_spawn.y);<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>});<br/>
            });</p>
    </div>
</div>

<div class="section">
    <p class="subhead" id="deletedata">K.deleteData ( field, callback )</p>

    <p>K.deleteData deletes stored single-player data from the knecht server.</p>

    <div class="specs">
        <p>Parameters:</p>
        <ol>
            <li><b>field</b> : <em>string</em> or <em>array of string</em></li>
            <li><b>callback</b> : <em>function</em></li>
        </ol>
    </div>

    <p>The <b>field</b> parameter identifies the field or fields to be deleted.  Each application
        has its own namespace for data fields to prevent collision.</p>

    <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
        below return value as its sole argument.</p>

    <p class="subitem">Usage</p>

    <p>K.deleteData is used to delete a user's data from the server.  This might be done if the user wishes to start with
        a clean slate, or if an application needs to distinguish between a null value and one that does not exist at
        all.</p>

    <p class="subitem">Return value</p>

    <p>K.deleteData returns to the callback function an object containing the following members:</p>

    <ul>
        <li><b>.timestamp</b> : <em>number</em></li>
        <li><b>.error</b> : <em>string</em></li>
    </ul>

    <p class="subitem">.timestamp</p>

    <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

    <p class="subitem">.error</p>

    <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>

    <div class="example">
        <p>// EXAMPLE:<br/>
            //deletes data in the field 'p_spawn'<br/>
            K.login( 'Ian', '1234',<br/>
            <span>&nbsp;&nbsp;&nbsp;</span>function(res) {<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) K.deleteData(<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            ['p_spawn'], function(res){<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
            if(!res.error) alert("spawn deleted");<br/>
            <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>});<br/>
            });</p>
    </div>
</div>

</div>

<div class="section">
    <p class="subhead" id="groups">API | Groups</p>

    <p>These functions involve sharing data between multiple users.</p>

    <p class="subitem">Group commands</p>

    <ul class="select">
        <li><a href="#getgroups">K.getGroups</a> ( constraints, callback )</li>
        <li><a href="#startgroup">K.startGroup</a> ( group_name, callback )</li>
        <li><a href="#closegroup">K.closeGroup</a> ( group_name, callback )</li>
    </ul>

    <p class="subitem">Member commands</p>

    <ul class="select">
        <li><a href="#addmember">K.addMember</a> ( group_name, member, callback )</li>
        <li><a href="#removemember">K.removeMember</a> ( group_name, member, callback )</li>
    </ul>

    <p class="subitem">Data commands</p>

    <ul class="select">
        <li><a href="#getgroupdata">K.getGroupData</a> ( group_name, field, callback )</li>
        <li><a href="#submitupdate">K.submitUpdate</a> ( group_name, field, data, callback, member, permission )</li>
        <li><a href="#listenupdate">K.listenUpdate</a> ( group_name, callback, limit, clear )</li>
        <li><a href="#submitinput">K.submitInput</a> ( group_name, input, callback )</li>
        <li><a href="#listeninput">K.listenInput</a> ( group_name, callback, clear )</li>
        <li><a href="#setpermission">K.setPermission</a> ( group_name, field, member, permission, callback ) </li>
    </ul>

    <div class="section">
        <p class="subhead" id="getgroups">K.getGroups ( constraints, callback )</p>

        <p>K.getGroups retrieves the list of groups that meet a given set of constraints.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>constraints</b> : <em>object</em></li>
                <li><b>callback</b> : <em>function</em></li>
            </ol>
        </div>

        <p>The <b>constraints</b> parameter is an object with the following optional properties:</p>

        <ul>
            <li><b>.username</b> : <em>string</em></li>
            <li><b>.group_name</b> : <em>string</em></li>
            <li><b>.application</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.username</p>

        <p>Only groups who the named user is a member of will be included.</p>

        <p class="subitem">.group_name</p>

        <p>A string giving the name of a group.  Only the group whose name exactly matches will be included, if it
            exists.</p>

        <p class="subitem">.application</p>

        <p>Only groups for the named application will be included.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p class="subitem">Usage</p>

        <p>K.getGroups is used to retrieve lobby and user profile information, or to check whether a group with a given
            name exists or not.</p>

        <p class="subitem">Return value</p>

        <p>K.getGroups returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.groups</b> : <em>array of string</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.groups</p>

        <p>An array of all group names from the database matching the constraints.  This member is only present if the
            function completed successfully.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>

        <div class="example">
            <p>// EXAMPLE:<br/>
                //flag stating whether the user is a member of the group<br/>
                var in_class;<br/>
                //Checks whether the user is a member of the group<br/>
                K.getGroups( { <br/>
                <span>&nbsp;&nbsp;&nbsp;</span>username: "Patrick",<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>group: "classof2014",<br/>
                },<br/>
                function(res)<br/>
                {<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>in_class = (!res.error && res.groups[0] === "classof2014");<br/>
                });</p>
        </div>
    </div>

    <div class="section">
        <p class="subhead" id="startgroup">K.startGroup ( group_name, callback )</p>

        <p>K.startGroup registers a new group on the server with the calling user as its host.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>callback</b> : <em>function</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name that will be given to the new group</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p class="subitem">Usage</p>

        <p>K.startGroup is called in order to allocate a multi-user data space for use in multiplayer games or other
        networked applications.  The name of the group must be unique, and the calling user must be logged in and have
        the application internal variable set on their client, or an error will occur.</p>

        <p class="subitem">Return value</p>

        <p>K.startGroup returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>

        <div class="example">
            <p>// EXAMPLE:<br/>
                //registers a group and begins listening for inputs<br/>
                K.startGroup( <br/>
                <span>&nbsp;&nbsp;&nbsp;</span>"demo_group"<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>function(res)<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>{<br/>
                <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
                if(!res.error) <br/>
                <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
                K.listenInput("demo_group", listenCallback);<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>});</p>
        </div>
    </div>

    <div class="section">
        <p class="subhead" id="closegroup">K.closeGroup ( group_name, callback )</p>

        <p>K.closeGroup deletes a group and removes all of its data from the server.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>callback</b> : <em>function</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group to be deleted.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p class="subitem">Usage</p>

        <p>K.startGroup is called when a group has served its purpose and the host wishes to terminate it.  The calling
        user must be the host of the group and must be logged in, or an error will occur.  All users subscribed to updates
        at the time of closing will receive an empty response notifying them of the closure.</p>

        <p class="subitem">Return value</p>

        <p>K.closeGroup returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>

        <div class="example">
            <p>// EXAMPLE:<br/>
                //closes a group<br/>
                K.closeGroup( <br/>
                <span>&nbsp;&nbsp;&nbsp;</span>"demo_group"<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>function(res)<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>{<br/>
                <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>
                if(!res.error) alert("demo_group closed");<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>});</p>
        </div>
    </div>

    <div class="section">
        <p class="subhead" id="addmember">K.addMember ( group_name, member, callback )</p>

        <p>K.addMember adds a user to the member list of a group so that they can receive updates.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>member</b> : <em>string</em></li>
                <li><b>callback</b> : <em>function</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group to which the user will be added.</p>

        <p>The <b>member</b> parameter is the name of the user who will be added.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p class="subitem">Usage</p>

        <p>K.addMember inserts a user into the group's members set, which will allow that user to receive updates
        related to that group from the server.  The calling user must be logged in and the host of the group being added
        to, and the member must be a registered account.  Otherwise, an error will occur.  The added member will only be
        notified if they have subscribed to updates with K.listenUpdate.</p>

        <p class="subitem">Return value</p>

        <p>K.addMember returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>

        <div class="example">
            <p>// EXAMPLE:<br/>
                //register and add Ian to the group 'ex'<br/>
                K.startGroup('secret', function(res){ <br/>
                <span>&nbsp;&nbsp;&nbsp;</span>if(!res.error)K.addMember('ex', 'Ian', function(res){<br/>
                <span>&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert("Ian added");<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>}<br/>
                });</p>
        </div>
    </div>

    <div class="section">
        <p class="subhead" id="removemember">K.removeMember ( group_name, member, callback )</p>

        <p>K.removeMember removes a user from the member list of a group so that they no longer receive updates.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>member</b> : <em>string</em></li>
                <li><b>callback</b> : <em>function</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group from which the user will be removed.</p>

        <p>The <b>member</b> parameter is the name of the user who will be removed.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p class="subitem">Usage</p>

        <p>K.removeMember removes that user from the group's internal member list.  This will prevent that user from
        receiving any further data related to that group via K.listenUpdate.  The calling user must be logged in and the
        host of the group being added to, and the member must be a registered account.  Otherwise, an error will occur.
        The server still returns a success even if the specified user was not a member of the group to begin with.</p>

        <p class="subitem">Return value</p>

        <p>K.removeMember returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>

        <div class="example">
            <p>// EXAMPLE:<br/>
                //remove Ian from the group 'ex'<br/>
                K.removeMember('ex', 'Ian', function(res){<br/>
                <span>&nbsp;&nbsp;&nbsp;</span>if(!res.error) alert("Ian removed");<br/>
                });</p>
        </div>
    </div>

    <div class="section">
        <p class="subhead" id="getgroupdata">K.getGroupData ( group_name, field, callback )</p>

        <p>K.getGroupData retrieves stored data from a shared group</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>field</b> : <em>string or array of string</em></li>
                <li><b>callback</b> : <em>function</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group from which the data will be retrieved.</p>

        <p>The <b>field</b> parameter is the name(s) of the data field(s) the user wants the value of.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p class="subitem">Usage</p>

        <p>K.getGroupData is used whenever a user requires shared data from the server.  The data may be saved and used
        locally, but the application should not continue using old data after an update notification occurs.  It need not
        be called if the new value was included with the update callback itself.  The user must have permission to read
        the fields specified, otherwise their value will return undefined.</p>

        <p class="subitem">Return value</p>

        <p>K.getGroupData returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.data</b> : <em>object</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.data</p>

        <p>An object containing members of the format 'field:value'.  If a requested field was not present in the
            database, or if the user does not have permission to read it, that member will return as undefined.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>
    </div>

    <div class="section">
        <p class="subhead" id="submitupdate">K.submitUpdate ( group_name, field, data, callback, member, permission )</p>

        <p>K.submitUpdate updates the shared data values of a group and optionally sets read permissions on those
            fields.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>field</b> : <em>string or array of strings</em></li>
                <li><b>data</b> : <em>any</em></li>
                <li><b>callback</b> : <em>function</em></li>
                <li><b>member</b> : <em>string or array of strings</em></li>
                <li><b>permission</b> : <em>boolean or array of boolean or array of array of booleans</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group being updated.</p>

        <p>The <b>field</b> parameter is the name(s) of the data field(s) the user wants to update.</p>

        <p>The <b>data</b> parameter is the value(s) the user wants to store in the above fields.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p>The <b>member</b> parameter is the user(s) who will have their read permission on the above fields
            changed.</p>

        <p>The <b>permission</b> parameter is the value(s) that the above user(s)' read permissions will be set to.</p>

        <p class="subitem">Usage</p>

        <p>K.submitUpdate is called by the host of a group whenever they need to notify the other members of some change
        in the data.  Updates will remain on the server until acknowledged by their target user.  If either the member or
        permissions parameters are defined, then the server will also perform a setPermissions function before
        responding.</p>

        <p class="subitem">Return value</p>

        <p>K.submitUpdate returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>
    </div>

    <div class="section">
        <p class="subhead" id="listenupdate">K.listenUpdate ( group_name, callback, limit, clear )</p>

        <p>K.listenUpdate subscribes a client to receive update notifications from the server</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>callback</b> : <em>function</em></li>
                <li><b>limit</b> : <em>number</em></li>
                <li><b>clear</b> : <em>array of string</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group being updated.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p>The <b>limit</b> parameter sets the maximum size a data value can be before it is not sent automatically with
        an update notification.  If this parameter is not set, then all updated data will be sent.</p>

        <p>The <b>clear</b> parameter is an array of update ids used to notify the server that they are safe to delete.
        This parameter should not be set by the application in most cases.</p>

        <p class="subitem">Usage</p>

        <p>K.listenUpdate should be called once in the application after first connecting to the group.  Thereafter, the
        subscription will automatically be renewed each time the server responds, unless an error occurs, the user is
        removed from the group, or the user closes the application.  No response to this request is sent unless one of
        the above happens.  If the user is removed from the group, there will be no updates, data, or clear field in the
        response.</p>

        <p class="subitem">Return value</p>

        <p>K.listenUpdate returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.updates</b> : <em>array of string</em></li>
            <li><b>.data</b> : <em>object</em></li>
            <li><b>.clear</b> : <em>array of string</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.updates</p>

        <p>An array containing the names of each of the updated fields this user has permission to read.</p>

        <p class="subitem">.data</p>

        <p>Object containing field:data pairs for each of the updated fields whose value is less than the limit in
        size.</p>

        <p class="subitem">.clear</p>

        <p>Array of strings identifying updates that the client has acknowledged.  Those updates will be removed from the
        server.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
        error response from the server.</p>
    </div>

    <div class="section">
        <p class="subhead" id="submitinput">K.submitInput ( group_name, input, callback )</p>

        <p>K.submitInput sends user input to the server to be relayed to the host.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>input</b> : <em>any</em></li>
                <li><b>callback</b> : <em>function</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group to which the input is being sent.</p>

        <p>The <b>input</b> parameter is the input the user wants to make.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p class="subitem">Usage</p>

        <p>K.submitInput is called by non-host users to participate in a Knecht group, since non-host clients are not
        trusted to alter the group data directly.  No input is processed except by the host's application.  Users should
        use K.listenUpdate to listen for a response.  This function should be used to notify a group that one wishes to
        join it.  </p>

        <p class="subitem">Return value</p>

        <p>K.submitInput returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>
    </div>

    <div class="section">
        <p class="subhead" id="listeninput">K.listenInput ( group_name, callback, clear )</p>

        <p>K.listenInput subscribes a client to receive notifications from the server when a user sends input to a
            group.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>callback</b> : <em>function</em></li>
                <li><b>clear</b> : <em>array of string</em></li>
            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group being updated</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the below
            return value as its sole argument</p>

        <p>The <b>clear</b> parameter is an array of input ids used to notify the server that they are safe to delete.
            This parameter should not be set by the application in most cases</p>

        <p class="subitem">Usage</p>

        <p>K.listenInput should be called once in the application by the host.  Thereafter, the subscription will
        automatically be renewed each time the server responds, unless an error occurs, the group is closed, or the user
        closes the application.  No response to this request is sent unless one of the above happens.  If the group is
        closed, there will be no updates, data, or clear field in the response.</p>

        <p class="subitem">Return value</p>

        <p>K.listenInput returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.inputs</b> : <em>array of objects</em></li>
            <li><b>.clear</b> : <em>array of strings</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.inputs</p>

        <p>Each element of the inputs member is an object with members <b>.username</b> containing the name of the
        sending user, <b>timestamp</b> marking when the server received the input, and <b>input</b>, which is the input
        data itself.</p>

        <p class="subitem">.clear</p>

        <p>Array of strings identifying inputs that the client has acknowledged.  Those updates will be removed from the
            server.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>
    </div>

    <div class="section">
        <p class="subhead" id="setpermisson">K.setPermission ( group_name, field, permission, callback, member )</p>

        <p>K.setPermission changes whether a user is allowed to read data from group fields.</p>

        <div class="specs">
            <p>Parameters:</p>
            <ol>
                <li><b>group_name</b> : <em>string</em></li>
                <li><b>field</b> : <em>string or array of strings</em></li>
                <li><b>permission</b> : <em>boolean or array of booleans or array of arrays of booleans</em></li>
                <li><b>callback</b> : <em>function</em></li>
                <li><b>member</b> : <em>string or array of strings</em></li>

            </ol>
        </div>

        <p>The <b>group_name</b> parameter is the name of the group being updated.</p>

        <p>The <b>field</b> parameter is the name(s) of the data field(s) whose permissions are being changed.</p>

        <p>The <b>permission</b> parameter is the value(s) to which the above user(s)' read permissions will be set.</p>

        <p>The <b>callback</b> parameter is a function that is called once the server has responded, and takes the
            below return value as its sole argument.</p>

        <p>The <b>member</b> parameter is the user(s) who will have their read permission on the above fields
            changed.</p>

        <p class="subitem">Usage</p>

        <p>K.setPermissions is used to give non-host users access to a group's shared data.  Knecht operates on a
        whitelist basis, such that only users with explicit permission may read any data field.  Passing the host's
        username as a member acts as a wildcard, allowing all users (even non-member accounts) to read that field.</p>

        <p class="subitem">Return value</p>

        <p>K.setPermission returns to the callback function an object containing the following members:</p>

        <ul>
            <li><b>.timestamp</b> : <em>number</em></li>
            <li><b>.error</b> : <em>string</em></li>
        </ul>

        <p class="subitem">.timestamp</p>

        <p>Indicates the time at which the server sent its response, in milliseconds since January 1st, 1970.</p>

        <p class="subitem">.error</p>

        <p>A string describing the type of error encountered.  This member is only present if the function received an
            error response from the server.</p>
    </div>

</div>


</div>

<div id="footer">
    <p>Interactive Media and Game Development<br/>
        Worcester Polytechnic Institute<br/>
        100 Institute Road, Worcester, MA 01609 USA<br/>
        <a href="http://imgd.wpi.edu">imgd.wpi.edu</a><br/>&nbsp;</p>
</div>
</body>
</html>

